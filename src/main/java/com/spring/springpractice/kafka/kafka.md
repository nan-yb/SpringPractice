
# kafka ë¯¸ë‹ˆí”„ë¡œì íŠ¸

### â“ìš”êµ¬ì‚¬í•­

- ì´ë¦„ì„ ì…ë ¥í•˜ê³  ìì‹ ì´ ì¢‹ì•„í•˜ëŠ” ìƒ‰ìƒì„ ê³ ë¥´ëŠ” ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ í•´ë‹¹ ì´ë²¤íŠ¸ì™€ ìœ ì € ì—ì´ì „íŠ¸ ì •ë³´ë¥¼ ì¹´í”„ì¹´ í† í”½ìœ¼ë¡œ ì „ë‹¬í•˜ê³  ìµœì¢…ì ìœ¼ë¡œ í•˜ë‘¡ê³¼ ì—˜ë¼ìŠ¤í‹± ì„œì¹˜ì— ì €ì¥í•˜ëŠ” ê²ƒì„ ëª©í‘œë¡œ í•œë‹¤.
- í•˜ë‘¡ì€ ëŒ€ìš©ëŸ‰ ë°ì´í„°ë¥¼ ë¶„ì„ ì²˜ë¦¬ í•  ìˆ˜ ìˆë‹¤. 
- HDFSëŠ” ëŒ€ìš©ëŸ‰ íŒŒì¼ì„ í•˜ë‘¡ì— ì•ˆì •ì ìœ¼ë¡œ ì €ì¥í•  ìˆ˜ ìˆê²Œ í•˜ëŠ” íŒŒì¼ ì‹œìŠ¤í…œì´ë‹¤.
- ì—˜ë¼ìŠ¤í‹±ì„œì¹˜ëŠ” ì•„íŒŒì¹˜ ë£¨ì”¬ ê¸°ë°˜ ì˜¤í”ˆì†ŒìŠ¤ ë¶„ì‚° ê²€ìƒ‰ ì—”ì§„ , ì—˜ë¼ìŠ¤í‹±ì„œì¹˜ì— ë°ì´í„°ë¥¼ ìŒ“ì•„ì„œ ë°©ëŒ€í•œ ì–‘ì˜ ë°ì´í„°ë¥¼ ì €ì¥, ê²€ìƒ‰ ,ë¶„ì„í•  ìˆ˜ ìˆë‹¤. ì‚¬ìš©ìì˜ ì´ë²¤íŠ¸ë¥¼ ì—˜ë¼ìŠ¤í‹±ì„œì¹˜ì— ìŒ“ì•„ì„œ í‚¤ë°”ë‚˜ë¥¼ í†µí•´ ë°ì´í„°ë¥¼ ì‹œê°í™”í•˜ê³  ë¶„ì„í•  ìˆ˜ ìˆë‹¤.

### ğŸš¨ íŒŒì´í”„ë¼ì¸ ì •ì±…
- ì¼ë¶€ ë°ì´í„°ì˜ ìœ ì‹¤ ë˜ëŠ” ì¤‘ë³µ í—ˆìš©
- ì•ˆì •ì ìœ¼ë¡œ ëŠì„ì—†ëŠ” ì ì¬
- ê°‘ì‘ìŠ¤ëŸ½ê²Œ ë°œìƒí•˜ëŠ” ë§ì€ ë°ì´í„°ì–‘ì„ í—ˆìš©

---

### ì•„í‚¤í…ì²˜
![ì•„í‚¤í…ì²˜](../kafka/images/architecture.png)

- ë¡œì»¬ í•˜ë‘¡ , ì—˜ë¼ìŠ¤í‹±ì„œì¹˜ , í‚¤ë°”ë‚˜ ì„¤ì¹˜
- í† í”½ìƒì„±
- ì´ë²¤íŠ¸ ìˆ˜ì§‘ ì›¹í˜ì´ì§€ ê°œë°œ
- REST API í”„ë¡œë“€ì„œ ì• í”Œë¦¬ì¼€ì´ì…˜ ê°œë°œ
- í•˜ë‘¡ ì ì¬ ì»¨ìŠˆë¨¸ ì• í”Œë¦¬ì¼€ì´ì…˜ ê°œë°œ
- ì—˜ë¼ìŠ¤í‹±ì„œì¹˜ ì‹±í¬ ì»¤ë„¥í„° ê°œë°œ

### í”„ë¡œë“€ì„œ
- ack - ì¼ë¶€ ìœ ì‹¤ì´ë‚˜ ì¤‘ë³µì´ ë°œìƒí•˜ë”ë¼ë„ ì•ˆì •ì ì´ê³  ë¹ ë¥¸ íŒŒì´í”„ë¼ì¸ì„ êµ¬ì„±í•˜ê¸° ìœ„í•´ **1ë¡œ ì„¤ì •**
- min.insync.replicas - acksë¥¼ 1ë¡œ ì„ íƒí–ˆê¸° ë•Œë¬¸ì— ì„¤ì •(replicas) ë¬´ì‹œí•˜ê³  ë¦¬ë” íŒŒí‹°ì…˜ì— ì§€ì† ì ì¬í•˜ê²Œ ëœë‹¤.
- partition - **ê¸°ë³¸ íŒŒí‹°ì…”ë„ˆ** ( UniformStickyPartitioner )
- retries(ì¬ì‹œë„) - **ê¸°ë³¸ê°’**
- ì••ì¶• ì˜µì…˜ :   
ì´ ìš©ëŸ‰ì„ ì¤„ì´ê³  ë„¤íŠ¸ì›Œí¬ì˜ ì‚¬ìš©ëŸ‰ì„ ì¤„ì´ëŠ” íš¨ê³¼ê°€ ìˆì§€ë§Œ , CPUì™€ ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ì´ ëŠ˜ì–´ë‚¨. ë”°ë¼ì„œ ì••ì¶•ì„ í•˜ì§€ì•Šì•˜ì„ ë•Œë³´ë‹¤ ì²˜ë¦¬ëŸ‰ì´ ì¤„ì–´ë“¤ ìˆ˜ ìˆë‹¤. **ê¸°ë³¸ê°’**

### í† í”½
- partition ê°¯ìˆ˜ :    
ë°ì´í„° ì²˜ë¦¬ ìˆœì„œë¥¼ ì§€ì¼œì•¼ í•˜ëŠ”ì§€ ì—¬ë¶€ì— ë”°ë¼ ì—„ê²©í•˜ê²Œ ì •í• ì§€ ë§ì§€ ê²°ì •í•œë‹¤. ë°ì´í„°ë¥¼ ìˆœì„œëŒ€ë¡œ ì ì¬í•˜ì§€ ì•Šë”ë¼ë„ í•˜ë‘¡ê³¼ ì—˜ë¼ìŠ¤í‹±ì„œì¹˜ì—ì„œ ë°ì´í„°ë¥¼ ì¡°íšŒí•  ë•Œ ì‹œê°„ ìˆœì„œëŒ€ë¡œ ì¡°íšŒí•  ìˆ˜ ìˆë‹¤.
ì´ë²¤íŠ¸ê°€ ë°œìƒí•  ë•Œ ì´ë²¤íŠ¸ ë°œìƒ ì‹œê°„ì„ ë°ì´í„°ì— ê°™ì´ ì¡°í•©í•´ì„œ ë³´ë‚´ ì²˜ë¦¬ìˆœì„œë¥¼ ì§€í‚¤ì§€ ì•Šì•„ë„ ëœë‹¤. ë”°ë¼ì„œ **íŒŒí‹°ì…˜ì˜ ê°œìˆ˜ëŠ” 2ê°œ**
- ë©”ì‹œì§€ í‚¤ì˜ ì‚¬ìš©ì—¬ë¶€ :  
ë©”ì‹œì§€ í‚¤ë¥¼ ì‚¬ìš©í•˜ê³  ì»¤ìŠ¤í…€ í”„ë¡œë“€ì„œ íŒŒí‹°ì…”ë„ˆë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šì„ ê²½ìš° ë©”ì‹œì§€ í‚¤ì˜ í•´ì‹œê°’ìœ¼ë¡œ íŒŒí‹°ì…˜ì´ ë¶„ë°°ë˜ê¸° ë–„ë¬¸ì´ë‹¤.  
ì¶”í›„ íŒŒí‹°ì…˜ì´ ì¦ê°€ë˜ë©´ í•´ì‹œê°’ê³¼ íŒŒí‹°ì…˜ì˜ ë§¤ì¹­ì´ ê¹¨ì§€ê¸° ë•Œë¬¸ì— ë©”ì‹œì§€ í‚¤ë¥¼ í™œìš©í•˜ê³  íŠ¹ì •íŒŒí‹°ì…˜ì— í• ë‹¹í•˜ëŠ” ì»¨ìŠˆë¨¸ë¥¼ ìš´ì˜í•  ê²½ìš° ë§¤ìš° ê³¤ë€í•´ì§„ë‹¤.  
ë©”ì‹œì§€ í‚¤ë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šìœ¼ë¯€ë¡œ í† í”½ì— ë“¤ì–´ì˜¤ëŠ” **ë°ì´í„°ì˜ ì–‘ì— ë”°ë¼ íŒŒí‹°ì…˜ ê°œìˆ˜ë¥¼ ê°€ë³€ì ìœ¼ë¡œ ì„¤ì •í•œë‹¤.**
- ë³µì œ ê°œìˆ˜ : ë†’ì„ ìˆ˜ë¡ ë°ì´í„°ì˜ ë³µêµ¬ í™•ë¥ ì´ ë†’ì•„ì§„ë‹¤. ë‹¤ë§Œ ë³µì œ ê°œìˆ˜ê°€ ë„ˆë¬´ ë†’ìœ¼ë©´ íŒ”ë¡œì›Œ íŒŒí‹°ì…˜ì´ ë°ì´í„°ë¥¼ ë³µì‚¬í•˜ëŠ” ë°ì— ì‹œê°„ì´ ì˜¤ë˜ê±¸ë¦¬ë©° ìš©ëŸ‰ ë˜í•œ ëŠ˜ì–´ë‚œë‹¤.  
ë”°ë¼ì„œ 1ëŒ€ì— ì´ìŠˆê°€ ë°œìƒí–ˆì„ ê²½ìš°ì—ë„ ì•ˆì •ì ìœ¼ë¡œ ë°ì´í„°ë¥¼ ë°›ê¸° ìœ„í•´ **ìµœì†Œ ì„¤ì •ìœ¼ë¡œ 2ë¡œ ì„¤ì •**

### ì»¨ìŠˆë¨¸
- í† í”½ì— ì €ì¥ë˜ì–´ìˆëŠ” ì›¹ ì´ë²¤íŠ¸ë¥¼ í•˜ë‘¡ê³¼ ì—˜ë¼ìŠ¤í‹±ì„œì¹˜ì— ì €ì¥í•˜ëŠ” ë¡œì§ì„ ë§Œë“œëŠ” ë°©ë²•ì€ í¬ê²Œ ë‘ê°€ì§€ ë°©ë²•ì´ ìˆë‹¤.

> ì²«ë²ˆì§¸ ë°©ë²•ì€ ì»¨ìŠˆë¨¸ APIë¥¼ ì‚¬ìš©í•˜ì—¬ ì§ì ‘ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ê°œë°œí•˜ëŠ” ë°©ë²•   
> ë‘ë²ˆì§¸ ë°©ë²•ì€ ì»¤ë„¥íŠ¸ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒ , ë¶„ì‚°ì»¤ë„¥íŠ¸ë¥¼ ì‚¬ìš©í•˜ë©´ REST APIë¥¼ í†µí•´ ì»¤ë„¥í„°ë¡œ ë°˜ë³µì ì¸ íŒŒì´í”„ë¼ì¸ì„ ì‰½ê²Œ ìƒì„±í•  ìˆ˜ ìˆë‹¤.

### ê¸°ëŠ¥ êµ¬í˜„ 


- ë¡œì»¬ í•˜ë‘¡ ì—˜ë¼ìŠ¤í‹±ì„œì¹˜ í‚¤ë°”ë‚˜ ì„¤ì¹˜
- brew ì„¤ì¹˜(í‚¤ë°”ë‚˜ ì—˜ë¼ìŠ¤í‹±ì„œì¹˜) ì•ˆë˜ëŠ” ì´ìŠˆ ìˆëŠ”ë“¯ 2023/11/22ì¼
- dockerë¡œ ëŒ€ì²´ ì˜ˆì •

```zsh
  brew tap elastic/tap
  brew install elastic/tap/kibana-full
  brew install elastic/tap/elasticsearch-full
  brew install hadoop 
```

- í† í”½ìƒì„± 
```zsh
bin/kafka-topics.sh --create \
--bootstrap-server host:9092 \
--replication-factor 2 \
--partitions 3 \
--topic select-color
```




ì°¸ê³  :  ì•„íŒŒì¹˜ ì¹´í”„ì¹´ ì• í”Œë¦¬ì¼€ì´ì…˜ í”„ë¡œê·¸ë˜ë° with ìë°” 